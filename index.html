<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Innovation Club Member Poll</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <script>
  fetch('questions.json')
    .then(res => res.json())
    .then(data => {
      if (!data.active) {
        window.location.href = "closed.html";
      }
    });
</script>

  <div class="container">
    <h1>INNOVATION CLUB MEMBER POLL</h1>
    <form name="member-poll" method="POST" data-netlify="true" id="pollForm" netlify action="thankyou.html">
      <input type="hidden" name="form-name" value="member-poll" />
      
      <label>Name</label>
      <input type="text" name="name" required />

      <label>Class and Section</label>
      <input type="text" name="class_section" required />

      <label>Admission Number</label>
      <input type="text" name="admission_number" required />

      <div id="vote-section">
        <label for="vote">Your Vote</label>
        <p id="vote-question" class="subtitle"></p>
        <select name="vote" id="vote-dropdown" required></select>
      </div>

      <label>Remarks</label>
      <textarea name="remarks"></textarea>

      <button type="submit">SUBMIT</button>
    </form>
  </div>

  <script src="script.js"></script>
  <script>
  // Parse URL query parameters
  const urlParams = new URLSearchParams(window.location.search);
  const name = urlParams.get("name");
  const class_section = urlParams.get("class");
  const admission_number = urlParams.get("id");

  // Autofill form if data is available
  if (name) document.querySelector('input[name="name"]').value = name;
  if (class_section) document.querySelector('input[name="class_section"]').value = class_section;
  if (admission_number) document.querySelector('input[name="admission_number"]').value = admission_number;
</script>

</body>

</html>
